import{Q as ue,a as me,b as H,c as ae,d as U,e as ke}from"./QTable-CJyFEtHV.js";import{c as ce,r as C,an as Ve,ao as $e,G as ve,g as be,h as w,d as ye,av as Ce,y as re,F as Se,aC as qe,J as De,aD as Ie,o as he,at as Pe,aE as Te,z as Ee,u as Oe,A as Le,aF as _e,a as Ae,ar as Be,C as Ue,b as O,w as ne,aG as Qe,a4 as W,H as J,az as Je,a1 as X,V as Ne,W as pe,Z as ge,X as i,$ as u,_ as l,ah as Fe,a3 as h,a2 as A,aH as ie,a0 as $,ae as E,aI as Me,aJ as je,aA as Y,aa as de,ab as R,ad as se,ac as He}from"./index-DSeRMBOc.js";import{a as we,b as z,_ as Re}from"./_plugin-vue_export-helper-B6q4rR8f.js";import{Q as ze,C as M}from"./ClosePopup-W8eqLCAW.js";import{u as Ge}from"./vue-i18n-Gz_90w47.js";import"./format-BvkBI9bc.js";const fe=ce({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:a,emit:g}){const _=be(),b=C(null);let m=0;const t=[];function p(c){const q=typeof c=="boolean"?c:e.noErrorFocus!==!0,d=++m,y=(f,D)=>{g(`validation${f===!0?"Success":"Error"}`,D)},k=f=>{const D=f.validate();return typeof D.then=="function"?D.then(V=>({valid:V,comp:f}),V=>({valid:!1,comp:f,err:V})):Promise.resolve({valid:D,comp:f})};return(e.greedy===!0?Promise.all(t.map(k)).then(f=>f.filter(D=>D.valid!==!0)):t.reduce((f,D)=>f.then(()=>k(D).then(V=>{if(V.valid===!1)return Promise.reject(V)})),Promise.resolve()).catch(f=>[f])).then(f=>{if(f===void 0||f.length===0)return d===m&&y(!0),!0;if(d===m){const{comp:D,err:V}=f[0];if(V!==void 0&&console.error(V),y(!1,D),q===!0){const B=f.find(({comp:N})=>typeof N.focus=="function"&&Ce(N.$)===!1);B!==void 0&&B.comp.focus()}}return!1})}function S(){m++,t.forEach(c=>{typeof c.resetValidation=="function"&&c.resetValidation()})}function L(c){c!==void 0&&re(c);const q=m+1;p().then(d=>{q===m&&d===!0&&(e.onSubmit!==void 0?g("submit",c):c?.target!==void 0&&typeof c.target.submit=="function"&&c.target.submit())})}function P(c){c!==void 0&&re(c),g("reset"),Se(()=>{S(),e.autofocus===!0&&e.noResetFocus!==!0&&v()})}function v(){qe(()=>{if(b.value===null)return;(b.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||b.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||b.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(b.value.querySelectorAll("[tabindex]"),q=>q.tabIndex!==-1))?.focus({preventScroll:!0})})}De(Ie,{bindComponent(c){t.push(c)},unbindComponent(c){const q=t.indexOf(c);q!==-1&&t.splice(q,1)}});let T=!1;return Ve(()=>{T=!0}),$e(()=>{T===!0&&e.autofocus===!0&&v()}),ve(()=>{e.autofocus===!0&&v()}),Object.assign(_.proxy,{validate:p,resetValidation:S,submit:L,reset:P,focus:v,getValidationComponents:()=>t}),()=>w("form",{class:"q-form",ref:b,onSubmit:L,onReset:P},ye(a.default))}}),Ke=ce({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:a,emit:g}){let _=!1,b,m,t=null,p=null,S,L;function P(){b?.(),b=null,_=!1,t!==null&&(clearTimeout(t),t=null),p!==null&&(clearTimeout(p),p=null),m?.removeEventListener("transitionend",S),S=null}function v(d,y,k){y!==void 0&&(d.style.height=`${y}px`),d.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,_=!0,b=k}function T(d,y){d.style.overflowY=null,d.style.height=null,d.style.transition=null,P(),y!==L&&g(y)}function c(d,y){let k=0;m=d,_===!0?(P(),k=d.offsetHeight===d.scrollHeight?0:void 0):(L="hide",d.style.overflowY="hidden"),v(d,k,y),t=setTimeout(()=>{t=null,d.style.height=`${d.scrollHeight}px`,S=I=>{p=null,(Object(I)!==I||I.target===d)&&T(d,"show")},d.addEventListener("transitionend",S),p=setTimeout(S,e.duration*1.1)},100)}function q(d,y){let k;m=d,_===!0?P():(L="show",d.style.overflowY="hidden",k=d.scrollHeight),v(d,k,y),t=setTimeout(()=>{t=null,d.style.height=0,S=I=>{p=null,(Object(I)!==I||I.target===d)&&T(d,"hide")},d.addEventListener("transitionend",S),p=setTimeout(S,e.duration*1.1)},100)}return he(()=>{_===!0&&P()}),()=>w(Pe,{css:!1,appear:e.appear,onEnter:c,onLeave:q},a.default)}}),Q=Te({}),Ye=Object.keys(_e),We=ce({name:"QExpansionItem",props:{..._e,...Le,...Oe,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Ee,"click","afterShow","afterHide"],setup(e,{slots:a,emit:g}){const{proxy:{$q:_}}=be(),b=Ae(e,_),m=C(e.modelValue!==null?e.modelValue:e.defaultOpened),t=C(null),p=Be(),{show:S,hide:L,toggle:P}=Ue({showing:m});let v,T;const c=O(()=>`q-expansion-item q-item-type q-expansion-item--${m.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),q=O(()=>e.contentInsetLevel===void 0?null:{["padding"+(_.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),d=O(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),y=O(()=>{const s={};return Ye.forEach(o=>{s[o]=e[o]}),s}),k=O(()=>d.value===!0||e.expandIconToggle!==!0),I=O(()=>e.expandedIcon!==void 0&&m.value===!0?e.expandedIcon:e.expandIcon||_.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),f=O(()=>e.disable!==!0&&(d.value===!0||e.expandIconToggle===!0)),D=O(()=>({expanded:m.value===!0,detailsId:p.value,toggle:P,show:S,hide:L})),V=O(()=>{const s=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:_.lang.label[m.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":m.value===!0?"true":"false","aria-controls":p.value,"aria-label":s}});ne(()=>e.group,s=>{T?.(),s!==void 0&&K()});function B(s){d.value!==!0&&P(s),g("click",s)}function N(s){s.keyCode===13&&G(s,!0)}function G(s,o){o!==!0&&s.qAvoidFocus!==!0&&t.value?.focus(),P(s),re(s)}function Z(){g("afterShow")}function x(){g("afterHide")}function K(){v===void 0&&(v=Qe()),m.value===!0&&(Q[e.group]=v);const s=ne(m,n=>{n===!0?Q[e.group]=v:Q[e.group]===v&&delete Q[e.group]}),o=ne(()=>Q[e.group],(n,r)=>{r===v&&n!==void 0&&n!==v&&L()});T=()=>{s(),o(),Q[e.group]===v&&delete Q[e.group],T=void 0}}function ee(){const s={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},o=[w(X,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&m.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:I.value})];return f.value===!0&&(Object.assign(s,{tabindex:0,...V.value,onClick:G,onKeyup:N}),o.unshift(w("div",{ref:t,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),w(z,s,()=>o)}function te(){let s;return a.header!==void 0?s=[].concat(a.header(D.value)):(s=[w(z,()=>[w(ue,{lines:e.labelLines},()=>e.label||""),e.caption?w(ue,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&s[e.switchToggleSide===!0?"push":"unshift"](w(z,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>w(X,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&s[e.switchToggleSide===!0?"unshift":"push"](ee()),s}function oe(){const s={ref:"item",style:e.headerStyle,class:e.headerClass,dark:b.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return k.value===!0&&(s.clickable=!0,s.onClick=B,Object.assign(s,d.value===!0?y.value:V.value)),w(we,s,te)}function le(){return J(w("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:q.value,id:p.value},ye(a.default)),[[Je,m.value]])}function j(){const s=[oe(),w(Ke,{duration:e.duration,onShow:Z,onHide:x},le)];return e.expandSeparator===!0&&s.push(w(W,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:b.value}),w(W,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:b.value})),s}return e.group!==void 0&&K(),he(()=>{T?.()}),()=>w("div",{class:c.value},[w("div",{class:"q-expansion-item__container relative-position"},j())])}}),Xe=Ne({name:"ProductsManagement",setup(){const{t:e}=Ge(),a=C([]),g=C([{product_id:1,sku:"PEN-BLUE-001",name:"Blue Ballpoint Pen",description:"Smooth writing pen",category_id:2,brand_id:null,base_price:1.5,cost_price:.6,stock_quantity:120,min_stock:20,unit:"pcs",prices:{},price_template_id:null,discount_policy:{},merch:{},barcodes:["0123456789012"],is_active:!0},{product_id:2,sku:"NOTE-A5-001",name:"A5 Notebook",description:"Ruled, 100 pages",category_id:3,brand_id:null,base_price:3.99,cost_price:1.5,stock_quantity:80,min_stock:15,unit:"pcs",prices:{},price_template_id:null,discount_policy:{},merch:{},barcodes:["0123456789013"],is_active:!0},{product_id:3,sku:"BOOK-NOVEL-001",name:"Mystery Novel",description:"Bestseller",category_id:4,brand_id:null,base_price:12.5,cost_price:6,stock_quantity:30,min_stock:5,unit:"pcs",prices:{},price_template_id:null,discount_policy:{},merch:{},barcodes:["0123456789014"],is_active:!0}]),_=O(()=>{const o=new Map;return a.value.forEach(n=>o.set(n.category_id,n)),o}),b=C(""),m=C(!0),t=C(null),p=O(()=>[{name:"sku",label:e("pm.product.sku"),field:"sku",align:"left",sortable:!0},{name:"name",label:e("pm.product.name"),field:"name",align:"left",sortable:!0},{name:"category",label:e("pm.product.category"),field:"category_id",align:"left",sortable:!1},{name:"base_price",label:e("pm.product.basePrice"),field:"base_price",align:"right",sortable:!0},{name:"cost_price",label:e("pm.product.costPrice"),field:"cost_price",align:"right",sortable:!0},{name:"stock_quantity",label:e("pm.product.stock"),field:"stock_quantity",align:"right",sortable:!0},{name:"is_active",label:e("pm.product.active"),field:"is_active",align:"center"},{name:"actions",label:"",field:"product_id",align:"right"}]),S=C({page:1,rowsPerPage:10}),L=O(()=>a.value.slice().sort((o,n)=>o.name.localeCompare(n.name)).map(o=>({label:o.name,value:o.category_id}))),P=O(()=>{const o=b.value.trim().toLowerCase(),n=t.value;return g.value.filter(r=>m.value&&!r.is_active||n&&r.category_id!==n?!1:o?`${r.sku} ${r.name} ${r.description||""}`.toLowerCase().includes(o):!0)}),v=C({open:!1,model:null,mode:"create"});function T(o){const n={category_id:o?.category_id??0,name:o?.name??"",created_at:o?.created_at??""};v.value={open:!0,model:n,mode:o&&o.category_id?"edit":"create"}}function c(){const o=v.value.model;if(o.name.trim()){if(v.value.mode==="edit"&&o.category_id){const n=a.value.findIndex(r=>r.category_id===o.category_id);if(n!==-1){const r=a.value[n];r&&(r.name=o.name)}}else{const n=Math.max(0,...a.value.map(r=>r.category_id))+1;a.value.push({...o,category_id:n})}v.value.open=!1}}function q(o){const n=e("pm.confirmDeleteCategory.simple");j.value={open:!0,message:n,onConfirm:()=>{a.value=a.value.filter(r=>r.category_id!==o.category_id),g.value=g.value.map(r=>r.category_id===o.category_id?{...r,category_id:null}:r),t.value===o.category_id&&(t.value=null)}}}const d=C({open:!1,model:null,mode:"create"}),y=C([]),k=C("{}"),I=C("{}"),f=C("{}");function D(o){const n={product_id:o?.product_id??0,sku:o?.sku??"",name:o?.name??"",description:o?.description??"",category_id:o?.category_id??t.value??null,brand_id:o?.brand_id??null,base_price:o?.base_price??0,cost_price:o?.cost_price??0,stock_quantity:o?.stock_quantity??0,min_stock:o?.min_stock??0,unit:o?.unit??"pcs",prices:o?.prices??{},price_template_id:o?.price_template_id??null,discount_policy:o?.discount_policy??{},merch:o?.merch??{},barcodes:o?.barcodes??[],is_active:o?.is_active??!0};d.value={open:!0,model:n,mode:o&&o.product_id?"edit":"create"},y.value=[...n.barcodes],k.value=B(n.prices),I.value=B(n.discount_policy),f.value=B(n.merch)}function V(o,n){try{return JSON.parse(o)}catch{return n}}function B(o){try{return JSON.stringify(o??{},null,2)}catch{return"{}"}}function N(){const n={...d.value.model,barcodes:[...y.value],prices:V(k.value,{}),discount_policy:V(I.value,{}),merch:V(f.value,{})};if(d.value.mode==="edit"&&n.product_id){const r=g.value.findIndex(F=>F.product_id===n.product_id);r!==-1&&(g.value[r]={...n})}else{const r=Math.max(0,...g.value.map(F=>F.product_id))+1;g.value.push({...n,product_id:r})}d.value.open=!1}function G(o){const n=Math.max(0,...g.value.map(F=>F.product_id))+1,r={...o,product_id:n,sku:`${o.sku}-COPY`,name:`${o.name} (Copy)`,sku_generated:null};g.value.push(r)}function Z(o){j.value={open:!0,message:e("pm.confirmDeleteProduct",{name:o.name}),onConfirm:()=>{g.value=g.value.filter(n=>n.product_id!==o.product_id)}}}function x(o){}function K(){s()}function ee(o){const n=_.value.get(o);n&&T(n)}function te(o){const n=_.value.get(o);n&&q(n)}function oe(o){if(o==null)return null;const n=_.value.get(o);return n?n.name:null}function le(o){return`${(o??0).toFixed(2)} MAD`}const j=C({open:!1,message:""});function s(){fetch("http://192.168.1.216:8080/api/categories",{method:"GET"}).then(o=>{if(!o.ok)throw new Error(`HTTP ${o.status}`);return o.json()}).then(o=>{a.value=o.map(n=>({category_id:n.id,name:n.name,created_at:n.created_at??""})),t.value&&!a.value.some(n=>n.category_id===t.value)&&(t.value=null)}).catch(o=>{console.error("Error fetching categories:",o)})}return ve(()=>{s()}),{t:e,categories:a,products:g,categorySelectOptions:L,getCategories:s,onEditCategoryOption:ee,onDeleteCategoryOption:te,productSearch:b,categoryFilterId:t,onlyActive:m,displayedProducts:P,productColumns:p,pagination:S,categoryDialog:v,productDialog:d,openCategoryDialog:T,saveCategory:c,confirmDeleteCategory:q,openProductDialog:D,saveProduct:N,duplicateProduct:G,confirmDeleteProduct:Z,onToggleActive:x,refreshAll:K,barcodesEdit:y,pricesJson:k,discountPolicyJson:I,merchJson:f,categoryLabelById:oe,formatCurrency:le,confirm:j}}}),Ze={class:"column full-height"},xe={class:"row items-center justify-between q-mb-sm"},et={class:"row items-center q-gutter-x-sm",style:{"margin-left":"10px"}},tt={class:"text-subtitle1"},ot={class:"row items-center no-wrap q-gutter-x-xs"},lt={class:"row q-col-gutter-sm q-mb-sm"},at={class:"col-12 col-md-6"},nt={class:"col-12 col-md-6"},it={class:"row no-wrap items-center q-gutter-x-xs"},dt={class:"column"},st={class:"text-weight-medium"},ut={class:"text-grey-7 text-caption ellipsis-2-lines"},rt={class:"text-h6"},ct={class:"row q-col-gutter-md"},mt={class:"col-12"},pt={class:"row justify-end q-gutter-sm q-mt-md"},gt={class:"text-h6"},ft={class:"row q-col-gutter-md"},vt={class:"col-12 col-md-4"},bt={class:"col-12 col-md-8"},yt={class:"col-12"},ht={class:"col-12 col-md-6"},_t={class:"col-6 col-md-3"},wt={class:"col-6 col-md-3"},kt={class:"col-6 col-md-3"},Vt={class:"col-6 col-md-3"},$t={class:"col-6 col-md-3"},Ct={class:"col-6 col-md-3 flex items-center"},St={class:"col-12 col-md-6"},qt={class:"text-caption text-grey-7 q-mt-xs"},Dt={class:"col-12"},It={class:"row q-col-gutter-md q-mt-sm"},Pt={class:"col-12 col-md-4"},Tt={class:"col-12 col-md-4"},Et={class:"col-12 col-md-4"},Ot={class:"row justify-end q-gutter-sm q-mt-md"},Lt={class:"text-body1"};function At(e,a,g,_,b,m){return ge(),pe(ze,{class:"q-pa-md"},{default:i(()=>[u("div",Ze,[u("div",xe,[u("div",et,[u("div",tt,h(e.$t("pm.products")),1),e.displayedProducts.length?(ge(),pe(me,{key:0,color:"primary",align:"middle",class:"q-ml-md"},{default:i(()=>[A(h(e.displayedProducts.length),1)]),_:1})):Fe("",!0)]),u("div",ot,[l(ie,{modelValue:e.onlyActive,"onUpdate:modelValue":a[0]||(a[0]=t=>e.onlyActive=t),label:e.$t("pm.activeOnly"),dense:""},null,8,["modelValue","label"]),l($,{dense:"",flat:"",round:"",icon:"refresh",onClick:e.refreshAll},null,8,["onClick"]),l($,{dense:"",flat:"",color:"primary",icon:"add",label:e.$t("pm.addCategory"),onClick:a[1]||(a[1]=t=>e.openCategoryDialog())},null,8,["label"]),l($,{dense:"",flat:"",color:"primary",icon:"add",label:e.$t("pm.addProduct"),onClick:a[2]||(a[2]=t=>e.openProductDialog())},null,8,["label"])])]),u("div",lt,[u("div",at,[l(E,{modelValue:e.productSearch,"onUpdate:modelValue":a[3]||(a[3]=t=>e.productSearch=t),dense:"",outlined:"",clearable:"",placeholder:e.$t("pm.searchProducts")},{prepend:i(()=>[l(X,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),u("div",nt,[l(ae,{modelValue:e.categoryFilterId,"onUpdate:modelValue":a[4]||(a[4]=t=>e.categoryFilterId=t),options:e.categorySelectOptions,dense:"",outlined:"",clearable:"","map-options":"","emit-value":"",label:e.$t("pm.filterByCategory")},{option:i(t=>[l(we,Me(je(t.itemProps)),{default:i(()=>[l(z,null,{default:i(()=>[l(ue,null,{default:i(()=>[A(h(t.opt.label),1)]),_:2},1024)]),_:2},1024),l(z,{side:""},{default:i(()=>[u("div",it,[l($,{dense:"",round:"",flat:"",size:"sm",icon:"edit",onClick:Y(p=>e.onEditCategoryOption(t.opt.value),["stop","prevent"])},{default:i(()=>[l(H,null,{default:i(()=>[A(h(e.$t("pm.edit")),1)]),_:1})]),_:2},1032,["onClick"]),l($,{dense:"",round:"",flat:"",size:"sm",color:"negative",icon:"delete",onClick:Y(p=>e.onDeleteCategoryOption(t.opt.value),["stop","prevent"])},{default:i(()=>[l(H,null,{default:i(()=>[A(h(e.$t("pm.delete")),1)]),_:1})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","label"])])]),l(ke,{class:"col",flat:"",rows:e.displayedProducts,columns:e.productColumns,"row-key":"product_id",pagination:e.pagination,"onUpdate:pagination":a[5]||(a[5]=t=>e.pagination=t)},{"body-cell-name":i(t=>[l(U,{props:t},{default:i(()=>[u("div",dt,[u("div",st,h(t.row.name),1),u("div",ut,h(t.row.description),1)])]),_:2},1032,["props"])]),"body-cell-category":i(t=>[l(U,{props:t},{default:i(()=>[A(h(e.categoryLabelById(t.row.category_id)||"-"),1)]),_:2},1032,["props"])]),"body-cell-base_price":i(t=>[l(U,{props:t},{default:i(()=>[A(h(e.formatCurrency(t.row.base_price)),1)]),_:2},1032,["props"])]),"body-cell-cost_price":i(t=>[l(U,{props:t},{default:i(()=>[A(h(e.formatCurrency(t.row.cost_price)),1)]),_:2},1032,["props"])]),"body-cell-stock_quantity":i(t=>[l(U,{props:t},{default:i(()=>[l(me,{color:t.row.stock_quantity>t.row.min_stock?"positive":"warning"},{default:i(()=>[A(h(t.row.stock_quantity),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-is_active":i(t=>[l(U,{props:t},{default:i(()=>[l(ie,{modelValue:t.row.is_active,"onUpdate:modelValue":[p=>t.row.is_active=p,p=>e.onToggleActive(t.row)],dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-actions":i(t=>[l(U,{props:t,class:"q-gutter-x-xs"},{default:i(()=>[l($,{dense:"",round:"",flat:"",size:"sm",icon:"edit",onClick:p=>e.openProductDialog(t.row)},{default:i(()=>[l(H,null,{default:i(()=>[A(h(e.$t("pm.edit")),1)]),_:1})]),_:2},1032,["onClick"]),l($,{dense:"",round:"",flat:"",size:"sm",icon:"content_copy",onClick:p=>e.duplicateProduct(t.row)},{default:i(()=>[l(H,null,{default:i(()=>[A(h(e.$t("pm.duplicate")),1)]),_:1})]),_:2},1032,["onClick"]),l($,{dense:"",round:"",flat:"",size:"sm",color:"negative",icon:"delete",onClick:p=>e.confirmDeleteProduct(t.row)},{default:i(()=>[l(H,null,{default:i(()=>[A(h(e.$t("pm.delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])]),l(se,{modelValue:e.categoryDialog.open,"onUpdate:modelValue":a[7]||(a[7]=t=>e.categoryDialog.open=t),persistent:""},{default:i(()=>[l(de,{style:{"min-width":"420px","max-width":"92vw"}},{default:i(()=>[l(R,{class:"row items-center justify-between"},{default:i(()=>[u("div",rt,h(e.categoryDialog.model?.category_id?e.$t("pm.category.editTitle"):e.$t("pm.category.addTitle")),1),J(l($,{flat:"",round:"",dense:"",icon:"close"},null,512),[[M]])]),_:1}),l(W),l(R,null,{default:i(()=>[l(fe,{onSubmit:Y(e.saveCategory,["prevent"])},{default:i(()=>[u("div",ct,[u("div",mt,[l(E,{modelValue:e.categoryDialog.model.name,"onUpdate:modelValue":a[6]||(a[6]=t=>e.categoryDialog.model.name=t),label:e.$t("pm.category.name"),dense:"",outlined:"",rules:[t=>!!t||e.$t("pm.required")]},null,8,["modelValue","label","rules"])])]),u("div",pt,[J(l($,{flat:"",label:e.$t("cancel")},null,8,["label"]),[[M]]),l($,{color:"primary",label:e.$t("save"),type:"submit"},null,8,["label"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(se,{modelValue:e.productDialog.open,"onUpdate:modelValue":a[22]||(a[22]=t=>e.productDialog.open=t),persistent:""},{default:i(()=>[l(de,{style:{"min-width":"720px","max-width":"96vw"}},{default:i(()=>[l(R,{class:"row items-center justify-between"},{default:i(()=>[u("div",gt,h(e.productDialog.model?.product_id?e.$t("pm.product.editTitle"):e.$t("pm.product.addTitle")),1),J(l($,{flat:"",round:"",dense:"",icon:"close"},null,512),[[M]])]),_:1}),l(W),l(R,null,{default:i(()=>[l(fe,{onSubmit:Y(e.saveProduct,["prevent"])},{default:i(()=>[u("div",ft,[u("div",vt,[l(E,{modelValue:e.productDialog.model.sku,"onUpdate:modelValue":a[8]||(a[8]=t=>e.productDialog.model.sku=t),label:e.$t("pm.product.sku"),dense:"",outlined:"",rules:[t=>!!t||e.$t("pm.required")]},null,8,["modelValue","label","rules"])]),u("div",bt,[l(E,{modelValue:e.productDialog.model.name,"onUpdate:modelValue":a[9]||(a[9]=t=>e.productDialog.model.name=t),label:e.$t("pm.product.name"),dense:"",outlined:"",rules:[t=>!!t||e.$t("pm.required")]},null,8,["modelValue","label","rules"])]),u("div",yt,[l(E,{modelValue:e.productDialog.model.description,"onUpdate:modelValue":a[10]||(a[10]=t=>e.productDialog.model.description=t),type:"textarea",autogrow:"",label:e.$t("pm.product.description"),dense:"",outlined:""},null,8,["modelValue","label"])]),u("div",ht,[l(ae,{modelValue:e.productDialog.model.category_id,"onUpdate:modelValue":a[11]||(a[11]=t=>e.productDialog.model.category_id=t),options:e.categorySelectOptions,label:e.$t("pm.product.category"),dense:"",outlined:"",clearable:"","map-options":"","emit-value":""},null,8,["modelValue","options","label"])]),u("div",_t,[l(E,{modelValue:e.productDialog.model.base_price,"onUpdate:modelValue":a[12]||(a[12]=t=>e.productDialog.model.base_price=t),modelModifiers:{number:!0},type:"number",step:"0.01",label:e.$t("pm.product.basePrice"),dense:"",outlined:""},null,8,["modelValue","label"])]),u("div",wt,[l(E,{modelValue:e.productDialog.model.cost_price,"onUpdate:modelValue":a[13]||(a[13]=t=>e.productDialog.model.cost_price=t),modelModifiers:{number:!0},type:"number",step:"0.01",label:e.$t("pm.product.costPrice"),dense:"",outlined:""},null,8,["modelValue","label"])]),u("div",kt,[l(E,{modelValue:e.productDialog.model.stock_quantity,"onUpdate:modelValue":a[14]||(a[14]=t=>e.productDialog.model.stock_quantity=t),modelModifiers:{number:!0},type:"number",step:"1",label:e.$t("pm.product.stock"),dense:"",outlined:""},null,8,["modelValue","label"])]),u("div",Vt,[l(E,{modelValue:e.productDialog.model.min_stock,"onUpdate:modelValue":a[15]||(a[15]=t=>e.productDialog.model.min_stock=t),modelModifiers:{number:!0},type:"number",step:"1",label:e.$t("pm.product.minStock"),dense:"",outlined:""},null,8,["modelValue","label"])]),u("div",$t,[l(E,{modelValue:e.productDialog.model.unit,"onUpdate:modelValue":a[16]||(a[16]=t=>e.productDialog.model.unit=t),label:e.$t("pm.product.unit"),dense:"",outlined:""},null,8,["modelValue","label"])]),u("div",Ct,[l(ie,{modelValue:e.productDialog.model.is_active,"onUpdate:modelValue":a[17]||(a[17]=t=>e.productDialog.model.is_active=t),label:e.$t("pm.product.active"),dense:""},null,8,["modelValue","label"])]),u("div",St,[l(ae,{modelValue:e.barcodesEdit,"onUpdate:modelValue":a[18]||(a[18]=t=>e.barcodesEdit=t),"use-input":"","use-chips":"",multiple:"","new-value-mode":"add-unique","input-debounce":"0",label:e.$t("pm.product.barcodes"),dense:"",outlined:"",options:[]},null,8,["modelValue","label"]),u("div",qt,h(e.$t("pm.product.barcodesHint")),1)]),u("div",Dt,[l(We,{dense:"","expand-separator":"",icon:"tune",label:e.$t("pm.advancedJson")},{default:i(()=>[u("div",It,[u("div",Pt,[l(E,{modelValue:e.pricesJson,"onUpdate:modelValue":a[19]||(a[19]=t=>e.pricesJson=t),type:"textarea",autogrow:"",label:e.$t("pm.pricesJson"),dense:"",outlined:""},null,8,["modelValue","label"])]),u("div",Tt,[l(E,{modelValue:e.discountPolicyJson,"onUpdate:modelValue":a[20]||(a[20]=t=>e.discountPolicyJson=t),type:"textarea",autogrow:"",label:e.$t("pm.discountPolicyJson"),dense:"",outlined:""},null,8,["modelValue","label"])]),u("div",Et,[l(E,{modelValue:e.merchJson,"onUpdate:modelValue":a[21]||(a[21]=t=>e.merchJson=t),type:"textarea",autogrow:"",label:e.$t("pm.merchJson"),dense:"",outlined:""},null,8,["modelValue","label"])])])]),_:1},8,["label"])])]),u("div",Ot,[J(l($,{flat:"",label:e.$t("cancel")},null,8,["label"]),[[M]]),l($,{color:"primary",label:e.$t("save"),type:"submit"},null,8,["label"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(se,{modelValue:e.confirm.open,"onUpdate:modelValue":a[24]||(a[24]=t=>e.confirm.open=t)},{default:i(()=>[l(de,null,{default:i(()=>[l(R,{class:"row items-center q-gutter-sm"},{default:i(()=>[l(X,{name:"warning",color:"warning"}),u("div",Lt,h(e.confirm.message),1)]),_:1}),l(He,{align:"right"},{default:i(()=>[J(l($,{flat:"",label:e.$t("cancel")},null,8,["label"]),[[M]]),J(l($,{color:"negative",label:e.$t("pm.delete"),onClick:a[23]||(a[23]=t=>e.confirm.onConfirm?.())},null,8,["label"]),[[M]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const Mt=Re(Xe,[["render",At],["__scopeId","data-v-56453026"]]);export{Mt as default};
